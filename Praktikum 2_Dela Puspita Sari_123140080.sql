CREATE TABLE fasilitas_publik (
    id SERIAL PRIMARY KEY,
    nama VARCHAR(100) NOT NULL,
    jenis VARCHAR(50),
    alamat TEXT,
    geom GEOMETRY(Point, 4326)
);
INSERT INTO fasilitas_publik (nama, jenis, alamat, geom) VALUES
(
    'musholla nurul iman', 
    'Fasilitas Umum', 
    'Jalan Perum Pondok Timur, Jatimulyo, Kec. Jati Agung, Kota Bandar Lampung, Lampung', 
    ST_SetSRID(ST_MakePoint(105.31503955583739, -5.336917274983146), 4326)
),
(
    'Gereja Katolik Santo Fransiskus Xaverius, Stasi Jatimulyo', 
    'Fasilitas Umum', 
    'Jatimulyo, Kec. Jati Agung, Kabupaten Lampung Selatan, Lampung', 
    ST_SetSRID(ST_MakePoint(105.31562467086299, -5.337184907987545), 4326)
),
(
    'RAINBOW 99', 
    'Fasilitas Umum', 
    'sidodadi 2 umbul natar , RT/RW.038/013, Jatimulyo, Kec. Jati Agung, Kabupaten Lampung Selatan, Lampung', 
    ST_SetSRID(ST_MakePoint(105.31192110229959, -5.331177388431725), 4326)
),
(
    'Pemancingan Sultan 99', 
    'Fasilitas Umum', 
    'Jatimulyo, Kec. Jati Agung, Kabupaten Lampung Selatan, Lampung', 
    ST_SetSRID(ST_MakePoint(105.31590117104852, -5.338450836223615), 4326)
),
(
    'SDN 3 Jatimulyo', 
    'Sekolah', 
    'Jl. Gadjah Mada No.50, Jatimulyo, Kec. Jati Agung, Kabupaten Lampung Selatan, Lampung', 
    ST_SetSRID(ST_MakePoint(105.31115449909449, -5.33043185175772), 4326)
);

SELECT id, nama, jenis, ST_AsText(geom) as koordinat FROM fasilitas_publik;

CREATE TABLE jalan (
    id SERIAL PRIMARY KEY,
    nama VARCHAR(100),
    geom GEOMETRY(LineString, 4326)
);

INSERT INTO jalan (nama, geom) VALUES
('Jl. Gadjah Mada', ST_GeomFromText('LINESTRING(105.3008615058099 -5.333111782866447, 105.31050823197008 -5.330128158469975)', 4326)),
('Jl. Wakidi', ST_GeomFromText('LINESTRING(105.31359754845026 -5.332855986167062,  105.3150281551626 -5.337104054267093, 105.3158474864595 -5.3369053929805315, 105.31580339270835 -5.337364483777985, 105.31589140027452 -5.338408845512424, 105.31599276578868 -5.338628931872186, 105.31604665646095 -5.33891254687406 )', 4326)),
('Jl. Tol Bakauheni-Terbanggi Besar', ST_GeomFromText('LINESTRING(
105.29309262123321 -5.3319923933767415, 105.31237347236268 -5.341782900494324, 105.31783584683608 -5.345513063888849)', 4326));

CREATE TABLE wilayah1 (
    id SERIAL PRIMARY KEY,
    nama VARCHAR(100),
    geom GEOMETRY(Polygon, 4326)
);

INSERT INTO wilayah1 (nama, geom) VALUES
('Kelurahan JatiMulyo', ST_GeomFromText('POLYGON((105.30075155378967 -5.335516984708079, 105.30576830887429 -5.336487754485864, 105.30673315395623 -5.3356906080043025, 105.30759535589266 -5.334157631125786, 105.3108594061043 -5.330682869309382, 105.31393869877608 -5.3290476804565285, 105.31418504215603 -5.328168764671305, 105.31400028459822 -5.327208087839366, 105.32327921972356 -5.324407808504985, 105.3219207810657 -5.3207825942592, 105.31890666201167 -5.319790093251926, 105.29009455977939 -5.33054698727675, 105.30075155378967 -5.335516984708079))', 4326));

CREATE TABLE wilayah2 (
    id SERIAL PRIMARY KEY,
    nama VARCHAR(100),
    geom GEOMETRY(Polygon, 4326)
);

INSERT INTO wilayah2 (nama, geom) VALUES
('Kelurahan Jati Agung', ST_GeomFromText('POLYGON((105.30077083572726 -5.33568005468328, 105.3178013872729 -5.345489197599896, 105.32168398712545 -5.35044638799451, 105.3219580529974 -5.350946652684334, 105.32563435213676 -5.3511563865038445, 105.32648097876498 -5.348852354698843, 105.32998036882829 -5.348796158692767, 105.34147886634354 -5.335253253685577, 105.3268467958662 -5.326396488533426, 105.32322934368861 -5.3243910754353365, 105.3139994966567 -5.3271249410810055, 105.31416970825121 -5.328208375774266, 105.31399562859168 -5.328999181875831, 105.3109383547669 -5.330678287239209, 105.30768524130602 -5.334188144312624, 105.3068583629744 -5.3356180803667765, 105.30578124516202 -5.336430542512674, 105.30077083572726 -5.33568005468328))', 4326));


SELECT 
    nama, 
    ST_AsText(geom) as wkt, 
    ST_AsGeoJSON(geom) as geojson, 
    ST_IsValid(geom) as is_valid 
FROM wilayah;

